{"version":3,"sources":["common/Detail.js","common/fp.js","order/store/initState.js","order/store/setDate.js","order/store/actionTypes.js","order/store/setTime.js","order/store/setStation.js","order/store/setSeatType.js","order/store/setTrainNumber.js","order/store/setDurationStr.js","order/store/setPrice.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","order/store/setPassengers.js","order/store/setMenu.js","order/store/setSearchParsed.js","order/store/reducers.js","order/store/index.js","order/store/fetchInitial.js","order/components/Account.js","order/components/Choose.js","order/components/Passengers.js","order/components/Ticket.js","order/components/Menu.js","order/App.js","order/index.js","common/Header.js","serviceWorker.js"],"names":["format","d","date","dayjs","locale","Detail","memo","props","leaveDate","arriveDate","leaveTime","arriveTime","leaveStation","arriveStation","trainNumber","durationStr","leaveDateStr","arriveDateStr","className","children","h0","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","debounce","fn","cb","timer","wait","args","context","this","clearTimeout","apply","setTimeout","initState","seatType","price","passengers","menu","isMenuVisible","isSearchParsed","setLeaveDate","type","payload","setArriveDate","setLeaveTime","time","setArriveTime","setLeaveStation","station","setArriveStation","setSeatType","setTrainNumber","setDurationStr","setPrice","_toConsumableArray","arr","Array","isArray","i","arr2","length","iter","Symbol","iterator","Object","prototype","toString","call","from","TypeError","setPassengers","passengerIdSeed","createAdult","dispatch","getState","passenger","keys","alert","id","name","ticketType","licenceNo","seat","createChild","adultFound","gender","birthday","followAdult","removePassenger","filter","updatePassenger","data","removeKeys","newPassengers","assign","key","setMenu","setMenuVisible","showMenu","showGenderMenu","find","title","options","value","active","handleClick","hideMenu","showFollowAdultMenu","map","adult","showTicketTypeMenu","forEach","child","setSearchParsed","reducers","state","action","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reduce","s","r","applyMiddleware","thunk","fetchInitial","url","fetch","then","res","json","departTimeStr","arriveTimeStr","Account","useState","expanded","setExpanded","Boolean","join","onClick","Seat","data-text","Choose","Passenger","followAdultName","handleRemove","handleUpdate","isAdult","useMemo","curName","setCurName","curLicenceNo","setCurLicenceNo","curBirthday","setCurBirthday","updateName","updateLicenceNo","updateBirthday","placeholder","onChange","e","readOnly","Passengers","nameMap","ret","Ticket","MenuItem","Menu","isVisible","hide","option","connect","cbs","bindActionCreators","actions","useEffect","queries","URI","parseQuery","location","search","valueOf","setSearch","handleBack","useCallback","history","back","Header","isBackVisible","style","display","ReactDOM","render","store","document","getElementById","serviceWorker","width","height","points","stroke","strokeWidth","fill","isLocalhost","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","headers","response","contentType","get","status","indexOf","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error"],"mappings":"wIAAA,gDAOA,SAASA,EAAOC,GACd,IAAMC,EAAOC,IAAMF,GAEnB,OAAOC,EAAKF,OAAO,SAAW,IAAME,EAAKE,OAAO,SAASJ,OAAO,OAElE,IAAMK,EAASC,gBAAK,SAAgBC,GAAQ,IAExCC,EAQED,EARFC,UACAC,EAOEF,EAPFE,WACAC,EAMEH,EANFG,UACAC,EAKEJ,EALFI,WACAC,EAIEL,EAJFK,aACAC,EAGEN,EAHFM,cACAC,EAEEP,EAFFO,YACAC,EACER,EADFQ,YAGIC,EAAehB,EAAOQ,GACtBS,EAAgBjB,EAAOS,GAE7B,OACE,yBAAKS,UAAU,UACb,yBAAKA,UAAU,WACb,yBAAKA,UAAU,QACb,uBAAGA,UAAU,QAAQN,GACrB,uBAAGM,UAAU,QAAQR,GACrB,uBAAGQ,UAAU,QAAQF,IAEvB,yBAAKE,UAAU,UACb,yBAAKA,UAAU,cAAcJ,GAC7B,uBAAGI,UAAU,aAAaX,EAAMY,UAChC,uBAAGD,UAAU,cAAb,eAA6BH,IAE/B,yBAAKG,UAAU,SACb,uBAAGA,UAAU,QAAQL,GACrB,uBAAGK,UAAU,QAAQP,GACrB,uBAAGO,UAAU,QAAQD,SAkBhBZ,O,+BC7DR,SAASe,IAA4B,IAAzBC,EAAwB,uDAAZC,KAAKC,MAC5BC,EAAS,IAAIF,KAAKD,GAOxB,OALAG,EAAOC,SAAS,GAChBD,EAAOE,WAAW,GAClBF,EAAOG,WAAW,GAClBH,EAAOI,gBAAgB,GAEhBJ,EAAOK,UAGT,SAASC,EAASC,EAAIC,GAAiB,IACxCC,EAD2BC,EAAY,uDAAL,IAEtC,OAAO,WAAmB,IAAD,uBAANC,EAAM,yBAANA,EAAM,gBACvB,IAAIC,EAAUC,KAEVJ,IACFK,aAAaL,GACbD,EAAGO,MAAMH,EAASD,IAGpBF,EAAQO,YAAW,WACjBT,EAAGQ,MAAMH,EAASD,KACjBD,IAvBP,qE,k2CCiBeO,EAjBG,CAChB3B,YAAa,KACbF,aAAc,KACdC,cAAe,KACf6B,SAAU,KACVlC,UAAWc,KAAKC,MAChBd,WAAYa,KAAKC,MACjBb,UAAW,KACXC,WAAY,KACZI,YAAa,KACb4B,MAAO,KACPC,WAAY,GACZC,KAAM,KACNC,eAAe,EACfC,gBAAgB,G,OCZX,SAASC,EAAa9C,GAC3B,MAAO,CACL+C,KCJ0B,iBDK1BC,QAAShD,GAIN,SAASiD,EAAcjD,GAC5B,MAAO,CACL+C,KCV2B,kBDW3BC,QAAShD,GEVN,SAASkD,EAAaC,GAC3B,MAAO,CACLJ,KDF0B,iBCG1BC,QAASG,GAIN,SAASC,EAAcD,GAC5B,MAAO,CACLJ,KDR2B,kBCS3BC,QAASG,GCVN,SAASE,EAAgBC,GAC9B,MAAO,CACLP,KFA6B,oBEC7BC,QAASM,GAIN,SAASC,EAAiBD,GAC/B,MAAO,CACLP,KFN8B,qBEO9BC,QAASM,GCVN,SAASE,EAAYhB,GAC1B,MAAO,CACLO,KHIyB,gBGHzBC,QAASR,GCHN,SAASiB,EAAe7C,GAC7B,MAAO,CACLmC,KJE4B,mBID5BC,QAASpC,GCHN,SAAS8C,EAAe7C,GAC7B,MAAO,CACLkC,KLG4B,mBKF5BC,QAASnC,GCHN,SAAS8C,EAASlB,GACvB,MAAO,CACLM,KNKqB,YMJrBC,QAASP,GCFE,SAASmB,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,CACtB,IAAK,IAAIG,EAAI,EAAGC,EAAO,IAAIH,MAAMD,EAAIK,QAASF,EAAIH,EAAIK,OAAQF,IAC5DC,EAAKD,GAAKH,EAAIG,GAGhB,OAAOC,GDFF,CAAkBJ,IEJZ,SAA0BM,GACvC,GAAIC,OAAOC,YAAYC,OAAOH,IAAkD,uBAAzCG,OAAOC,UAAUC,SAASC,KAAKN,GAAgC,OAAOL,MAAMY,KAAKP,GFGvF,CAAgBN,IGJpC,WACb,MAAM,IAAIc,UAAU,mDHGqC,GIFpD,SAASC,EAAclC,GAC5B,MAAO,CACLK,KXM0B,iBWL1BC,QAASN,GAIb,IAAImC,EAAkB,EAEf,SAASC,IACd,OAAO,SAACC,EAAUC,GAAc,IACtBtC,EAAesC,IAAftC,WADqB,uBAK7B,YAAwBA,EAAxB,+CAGE,IAHmC,IAA1BuC,EAAyB,QAC5BC,EAAOZ,OAAOY,KAAKD,GAEzB,MAAkBC,EAAlB,eAAwB,CACtB,IAAKD,EADO,MAGV,YADAE,MAAM,qDAViB,kFAgB7BJ,EACEH,EAAc,GAAD,SACRlC,GADQ,CAEX,CACE0C,KAAMP,EACNQ,KAAM,GACNC,WAAY,QACZC,UAAW,GACXC,KAAM,UAOT,SAASC,IACd,OAAO,SAACV,EAAUC,GAAc,IACtBtC,EAAesC,IAAftC,WAEJgD,EAAa,KAHY,uBAO7B,YAAwBhD,EAAxB,+CAAoC,CAGlC,IAHmC,IAA1BuC,EAAyB,QAC5BC,EAAOZ,OAAOY,KAAKD,GAEzB,MAAkBC,EAAlB,eAAwB,CACtB,IAAKD,EADO,MAGV,YADAE,MAAM,oDAKmB,UAAzBF,EAAUK,aACZI,EAAaT,EAAUG,KAlBE,kFAuBxBM,EAKLX,EACEH,EAAc,GAAD,SACRlC,GADQ,CAEX,CACE0C,KAAMP,EACNQ,KAAM,GACNM,OAAQ,GACRC,SAAU,GACVC,YAAaH,EACbJ,WAAY,QACZE,KAAM,SAdVL,MAAM,mFAqBL,SAASW,EAAgBV,GAC9B,OAAO,SAACL,EAAUC,GAQhBD,EAASH,EAPcI,IAAftC,WAGyBqD,QAC/B,SAAAd,GAAS,OAAIA,EAAUG,KAAOA,GAAMH,EAAUY,cAAgBT,QAO7D,SAASY,EAAgBZ,EAAIa,GAAwB,IAAlBC,EAAiB,uDAAJ,GACrD,OAAO,SAACnB,EAAUC,GAGhB,IAH8B,IACtBtC,EAAesC,IAAftC,WAECsB,EAAI,EAAGA,EAAItB,EAAWwB,OAAQF,IACrC,GAAItB,EAAWsB,GAAGoB,KAAOA,EAAI,CAC3B,IAAMe,EAAa,EAAOzD,GAC1ByD,EAAcnC,GAAKM,OAAO8B,OAAO,GAAI1D,EAAWsB,GAAIiC,GAFzB,2BAI3B,YAAkBC,EAAlB,+CAA8B,CAAC,IAApBG,EAAmB,eACrBF,EAAcnC,GAAGqC,IALC,kFAQ3BtB,EAASH,EAAcuB,IAEvB,QClHD,SAASG,EAAQ3D,GACtB,MAAO,CACLI,KZMoB,WYLpBC,QAASL,GAIN,SAAS4D,EAAe3D,GAC7B,MAAO,CACLG,KZA+B,sBYC/BC,QAASJ,GAIN,SAAS4D,EAAS7D,GACvB,OAAO,SAAAoC,GACLA,EAASuB,EAAQ3D,IACjBoC,EAASwB,GAAe,KAIrB,SAASE,EAAerB,GAC7B,OAAO,SAACL,EAAUC,GAAc,IAGxBC,EAFiBD,IAAftC,WAEqBgE,MAAK,SAAAzB,GAAS,OAAIA,EAAUG,KAAOA,KAE3DH,GAELF,EACEyB,EAAS,CACPG,MAAO,iCACPC,QAAS,CACP,CACED,MAAO,SACPE,MAAO,OACPC,OAAQ,SAAW7B,EAAUU,QAE/B,CACEgB,MAAO,SACPE,MAAO,SACPC,OAAQ,WAAa7B,EAAUU,SAGnCoB,YAdO,SAcKpB,GACVZ,EAASiB,EAAgBZ,EAAI,CAAEO,YAC/BZ,EAASiC,UAOZ,SAASC,EAAoB7B,GAClC,OAAO,SAACL,EAAUC,GAAc,IACtBtC,EAAesC,IAAftC,WAEFuC,EAAYvC,EAAWgE,MAAK,SAAAzB,GAAS,OAAIA,EAAUG,KAAOA,KAE3DH,GAELF,EACEyB,EAAS,CACPG,MAAO,6CACPC,QAASlE,EACNqD,QAAO,SAAAd,GAAS,MAA6B,UAAzBA,EAAUK,cAC9B4B,KAAI,SAAAC,GAAK,MAAK,CACbR,MAAOQ,EAAM9B,KACbwB,MAAOM,EAAM/B,GACb0B,OAAQK,EAAM/B,KAAOH,EAAUY,gBAEnCkB,YATO,SASKlB,GACVd,EAASiB,EAAgBZ,EAAI,CAAES,iBAC/Bd,EAASiC,UAOZ,SAASI,EAAmBhC,GACjC,OAAO,SAACL,EAAUC,GAAc,IACtBtC,EAAesC,IAAftC,WAEFuC,EAAYvC,EAAWgE,MAAK,SAAAzB,GAAS,OAAIA,EAAUG,KAAOA,KAE3DH,GAELF,EACEyB,EAAS,CACPG,MAAO,6CACPC,QAAS,CACP,CACED,MAAO,qBACPE,MAAO,QACPC,OAAiC,UAAzB7B,EAAUK,YAEpB,CACEqB,MAAO,sBACPE,MAAO,QACPC,OAAiC,UAAzB7B,EAAUK,aAGtByB,YAdO,SAcKzB,GACV,GAAmB,UAAfA,EACFP,EACEiB,EACEZ,EACA,CACEG,UAAW,GACXD,cAEF,CAAC,SAAU,cAAe,kBAGzB,CACL,IAAM6B,EAAQzE,EAAWgE,MACvB,SAAAzB,GAAS,OAAIA,EAAUG,KAAOA,GAA+B,UAAzBH,EAAUK,cAG1CrE,EAAWyB,EAAWqD,QAAO,SAAAd,GAAS,OAAIA,EAAUY,cAAgBT,KAEtE+B,GACFpC,EACEiB,EACEZ,EACA,CACEE,aACAK,OAAQ,GACRE,YAAasB,EAAM/B,GACnBQ,SAAU,IAEZ,CAAC,eAGL3E,EAASoG,SAAQ,SAAAC,GACf,IAAMlC,EAAKkC,EAAMlC,GAEjBL,EACEiB,EAAgBZ,EAAI,CAClBS,YAAasB,EAAM/B,UAKzBD,MAAM,sEAGVJ,EAASiC,UAOZ,SAASA,IACd,OAAOT,GAAe,GC7JjB,SAASgB,IACd,MAAO,CACLxE,KbS6B,oBaR7BC,SAAS,GCOb,IAAMwE,EAAW,CfIV,SAAiBC,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QACd,OAAQD,GACN,ICnB0B,iBDoBxB,OAAO,eAAK0E,EAAZ,CAAmBnH,UAAW0C,IAChC,ICpB2B,kBDqBzB,OAAO,eAAKyE,EAAZ,CAAmBlH,WAAYyC,IACjC,QACE,OAAOyE,IERN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QACd,OAAQD,GACN,IDjB0B,iBCkBxB,OAAO,eAAK0E,EAAZ,CAAmBjH,UAAWwC,IAChC,IDlB2B,kBCmBzB,OAAO,eAAKyE,EAAZ,CAAmBhH,WAAYuC,IACjC,QACE,OAAOyE,ICRN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QACd,OAAQD,GACN,IFf6B,oBEgB3B,OAAO,eAAK0E,EAAZ,CAAmB/G,aAAcsC,IACnC,IFhB8B,qBEiB5B,OAAO,eAAKyE,EAAZ,CAAmB9G,cAAeqC,IACpC,QACE,OAAOyE,ICfN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,IHLyB,gBGMvB,OAAO,eAAK0E,EAAZ,CAAmBjF,SAAUQ,IAC/B,QACE,OAAOyE,ICPN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,IJP4B,mBIQ1B,OAAO,eAAK0E,EAAZ,CAAmB7G,YAAaoC,IAClC,QACE,OAAOyE,ICPN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,ILN4B,mBKO1B,OAAO,eAAK0E,EAAZ,CAAmB5G,YAAamC,IAClC,QACE,OAAOyE,ICPN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,INJqB,YMKnB,OAAO,eAAK0E,EAAZ,CAAmBhF,MAAOO,IAC5B,QACE,OAAOyE,IK2GN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,IXrH0B,iBWsHxB,OAAO,eAAK0E,EAAZ,CAAmB/E,WAAYM,IACjC,QACE,OAAOyE,ICgCN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,IZ3JoB,WY4JlB,OAAO,eAAK0E,EAAZ,CAAmB9E,KAAMK,IAC3B,IZ5J+B,sBY6J7B,OAAO,eAAKyE,EAAZ,CAAmB7E,cAAeI,IACpC,QACE,OAAOyE,IClKN,SAAiBA,EAAOC,GAAS,IAC9B3E,EAAkB2E,EAAlB3E,KAAMC,EAAY0E,EAAZ1E,QAEd,OAAQD,GACN,IbA6B,oBaC3B,OAAO,eAAK0E,EAAZ,CAAmB5E,eAAgBG,IACrC,QACE,OAAOyE,K,YEXPE,EAAmBC,OAAOC,sCAAwCC,IACzDC,eDmBA,WAA6C,IAA5BN,EAA2B,uDAAnBlF,EAAWmF,EAAQ,uCACzD,OAAOF,EAASQ,QAAO,SAACC,EAAGC,GAAJ,OAAUA,EAAED,EAAGP,KAASD,KCpBbE,EAAiBQ,YAAgBC,O,MCF9D,SAASC,EAAaC,GAC3B,OAAO,SAAAvD,GACLwD,MAAMD,GACHE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAvC,GAAS,IACL0C,EAAiE1C,EAAjE0C,cAAeC,EAAkD3C,EAAlD2C,cAAerI,EAAmC0F,EAAnC1F,WAAYM,EAAuBoF,EAAvBpF,YAAa4B,EAAUwD,EAAVxD,MAE/DsC,EAAS7B,EAAayF,IACtB5D,EAAS3B,EAAcwF,IACvB7D,EAAS9B,EAAc1C,IACvBwE,EAASrB,EAAe7C,IACxBkE,EAASpB,EAASlB,Q,yECiCXoG,G,MA3CCzI,gBAAK,SAAiBC,GAAQ,IACpCoC,EAAkBpC,EAAlBoC,MAAOyB,EAAW7D,EAAX6D,OAD4B,EAGX4E,oBAAS,GAHE,mBAGpCC,EAHoC,KAG1BC,EAH0B,KAK3C,OACE,yBAAKhI,UAAU,WACb,yBACEA,UAAW,CAAC,QAAS+H,EAAW,WAAa,IAAIhD,OAAOkD,SAASC,KAAK,KACtEC,QAAS,kBAAMH,GAAaD,KAC5B,yBAAK/H,UAAU,SAASkD,EAASzB,GACjC,yBAAKzB,UAAU,UAAf,6BAEF,yBAAKA,UAAU,UAAf,4BACA,yBACEA,UAAW,CAAC,QAAS+H,EAAW,GAAK,UAAUhD,OAAOkD,SAASC,KAAK,KACpEC,QAAS,kBAAMH,GAAY,MAC7B,yBACEhI,UAAW,CAAC,SAAU+H,EAAW,GAAK,UAAUhD,OAAOkD,SAASC,KAAK,KACrEC,QAAS,kBAAMH,GAAY,KAC3B,yBAAKhI,UAAU,SAAf,4BACA,4BACGkD,EAAS,EACR,4BACE,oDACA,kCAAQzB,GACR,qCAAayB,IAGf,4BACE,gDC9BRkF,G,MAAOhJ,gBAAK,SAAcC,GAAQ,IAC9BmC,EAAwCnC,EAAxCmC,SAAUwD,EAA8B3F,EAA9B2F,gBAAiBZ,EAAa/E,EAAb+E,GAAII,EAASnF,EAATmF,KACvC,OACE,uBACExE,UAAW,CAAC,OAAQwE,IAAShD,EAAW,SAAW,IAAIuD,OAAOkD,SAASC,KAAK,KAC5EG,YAAW7G,EACX2G,QAAS,kBAAMnD,EAAgBZ,EAAI,CAAEI,KAAMhD,MAH7C,cA2CW8G,EA5BAlJ,gBAAK,SAAgBC,GAAQ,IAClCqC,EAAgCrC,EAAhCqC,WAAYsD,EAAoB3F,EAApB2F,gBAEpB,OACE,yBAAKhF,UAAU,UACb,uBAAGA,UAAU,OAAb,4BACA,yBAAKA,UAAU,aACZ0B,EAAWwE,KAAI,SAAAjC,GAAS,OACvB,yBAAKjE,UAAU,QAAQqF,IAAKpB,EAAUG,IACpC,uCACA,kBAAC,EAAD,iBAAUH,EAAV,CAAqBzC,SAAS,IAAIwD,gBAAiBA,KACnD,kBAAC,EAAD,iBAAUf,EAAV,CAAqBzC,SAAS,IAAIwD,gBAAiBA,KACnD,kBAAC,EAAD,iBAAUf,EAAV,CAAqBzC,SAAS,IAAIwD,gBAAiBA,KACnD,6CACA,kBAAC,EAAD,iBAAUf,EAAV,CAAqBzC,SAAS,IAAIwD,gBAAiBA,KACnD,kBAAC,EAAD,iBAAUf,EAAV,CAAqBzC,SAAS,IAAIwD,gBAAiBA,KACnD,gDCjCNuD,I,MAAYnJ,gBAAK,SAAmBC,GAAQ,IAE9C+E,EAYE/E,EAZF+E,GACAC,EAWEhF,EAXFgF,KACAmE,EAUEnJ,EAVFmJ,gBACAlE,EASEjF,EATFiF,WACAC,EAQElF,EARFkF,UACAI,EAOEtF,EAPFsF,OACAC,EAMEvF,EANFuF,SACA6D,EAKEpJ,EALFoJ,aACAC,EAIErJ,EAJFqJ,aACAjD,EAGEpG,EAHFoG,eACAQ,EAEE5G,EAFF4G,oBACAG,EACE/G,EADF+G,mBAGIuC,EAAUC,mBAAQ,iBAAqB,UAAftE,IAAwB,CAACA,IAhBR,EAkBjBwD,mBAASzD,GAlBQ,mBAkBxCwE,EAlBwC,KAkB/BC,EAlB+B,OAmBPhB,mBAASvD,GAnBF,mBAmBxCwE,EAnBwC,KAmB1BC,EAnB0B,OAoBTlB,mBAASlD,GApBA,mBAoBxCqE,EApBwC,KAoB3BC,EApB2B,OAsBSN,mBAAQ,WAC9D,MAAO,CACLO,WAAYvI,aACV,SAAAiF,GAAK,OAAI6C,EAAatE,EAAI,CAAEC,KAAMwB,OAClC,SAAAA,GAAK,OAAIiD,EAAWjD,MAEtBuD,gBAAiBxI,aACf,SAAAiF,GAAK,OAAI6C,EAAatE,EAAI,CAAEG,UAAWsB,OACvC,SAAAA,GAAK,OAAImD,EAAgBnD,MAE3BwD,eAAgBzI,aACd,SAAAiF,GAAK,OAAI6C,EAAatE,EAAI,CAAEQ,SAAUiB,OACtC,SAAAA,GAAK,OAAIqD,EAAerD,SAG3B,CAACzB,EAAIsE,IAfAS,EAtBuC,EAsBvCA,WAAYC,EAtB2B,EAsB3BA,gBAAiBC,EAtBU,EAsBVA,eAiBrC,OACE,wBAAIrJ,UAAU,aACZ,uBAAGA,UAAU,SAASmI,QAAS,kBAAMM,EAAarE,KAAlD,UAGA,wBAAIpE,UAAU,SACZ,wBAAIA,UAAU,QACZ,2BAAOA,UAAU,cAAjB,gBACA,2BACE+B,KAAK,OACL/B,UAAU,aACVsJ,YAAY,2BACZzD,MAAOgD,EACPU,SAAU,SAAAC,GAAC,OAAIL,EAAWK,EAAElJ,OAAOuF,UAErC,2BAAO7F,UAAU,cAAcmI,QAAS,kBAAM/B,EAAmBhC,KAC/C,UAAfE,EAAyB,qBAAQ,uBAGrCqE,GACC,wBAAI3I,UAAU,QACZ,2BAAOA,UAAU,mBAAjB,sBACA,2BACE+B,KAAK,OACL/B,UAAU,kBACVsJ,YAAY,uCACZzD,MAAOkD,EACPQ,SAAU,SAAAC,GAAC,OAAIJ,EAAgBI,EAAElJ,OAAOuF,YAI5C8C,GACA,wBAAI3I,UAAU,cACZ,2BAAOA,UAAU,gBAAjB,gBACA,2BACE+B,KAAK,OACL/B,UAAU,eACVsJ,YAAY,qBACZzD,MAAkB,SAAXlB,EAAoB,SAAiB,WAAXA,EAAsB,SAAM,GAC7D8E,UAAQ,EACRtB,QAAS,kBAAM1C,EAAerB,QAIlCuE,GACA,wBAAI3I,UAAU,QACZ,2BAAOA,UAAU,kBAAjB,gBACA,2BACE+B,KAAK,OACL/B,UAAU,iBACVsJ,YAAY,+DACZzD,MAAOoD,EACPM,SAAU,SAAAC,GAAC,OAAIH,EAAeG,EAAElJ,OAAOuF,YAI3C8C,GACA,wBAAI3I,UAAU,cACZ,2BAAOA,UAAU,qBAAjB,4BACA,2BACE+B,KAAK,OACL/B,UAAU,oBACVsJ,YAAY,qBACZzD,MAAO2C,EACPiB,UAAQ,EACRtB,QAAS,kBAAMlC,EAAoB7B,aAoFlCsF,GA5DItK,gBAAK,SAAoBC,GAAQ,IAEhDqC,EAQErC,EARFqC,WACAoC,EAOEzE,EAPFyE,YACAW,EAMEpF,EANFoF,YACAK,EAKEzF,EALFyF,gBACAE,EAIE3F,EAJF2F,gBACAS,EAGEpG,EAHFoG,eACAQ,EAEE5G,EAFF4G,oBACAG,EACE/G,EADF+G,mBAGIuD,EAAUf,mBAAQ,WACtB,IAAMgB,EAAM,GADgB,uBAE5B,YAAwBlI,EAAxB,+CAAoC,CAAC,IAA1BuC,EAAyB,QAClC2F,EAAI3F,EAAUG,IAAMH,EAAUI,MAHJ,kFAK5B,OAAOuF,IACN,CAAClI,IAEJ,OACE,yBAAK1B,UAAU,cACb,4BACG0B,EAAWwE,KAAI,SAAAjC,GACd,OACE,kBAAC,GAAD,eACEoB,IAAKpB,EAAUG,IACXH,EAFN,CAGEuE,gBAAiBmB,EAAQ1F,EAAUY,aACnC4D,aAAc3D,EACd4D,aAAc1D,EACdS,eAAgBA,EAChBQ,oBAAqBA,EACrBG,mBAAoBA,SAK5B,6BAASpG,UAAU,OACjB,yBAAKA,UAAU,QAAQmI,QAAS,kBAAMrE,MAAtC,4BAGA,yBAAK9D,UAAU,QAAQmI,QAAS,kBAAM1D,MAAtC,iCCzJOoF,I,MAlBAzK,gBAAK,SAAgBC,GAAQ,IAClCoC,EAAgBpC,EAAhBoC,MAAOM,EAAS1C,EAAT0C,KAEf,OACE,yBAAK/B,UAAU,UACb,2BACE,0BAAMA,UAAU,eAAe+B,GAC/B,0BAAM/B,UAAU,gBAAgByB,IAElC,yBAAKzB,UAAU,SAAf,qBCTA8J,I,MAAW1K,gBAAK,SAAkBC,GAAQ,IACtCsG,EAAsCtG,EAAtCsG,MAAOE,EAA+BxG,EAA/BwG,MAAOC,EAAwBzG,EAAxByG,OAAQC,EAAgB1G,EAAhB0G,YAE9B,OACE,wBAAI/F,UAAW8F,EAAS,SAAW,GAAIqC,QAAS,kBAAMpC,EAAYF,KAC/DF,OAqCQoE,GA1BF3K,gBAAK,SAAcC,GAAQ,IAC9B2K,EAAiD3K,EAAjD2K,UAAWrE,EAAsCtG,EAAtCsG,MAAOC,EAA+BvG,EAA/BuG,QAASG,EAAsB1G,EAAtB0G,YAAakE,EAAS5K,EAAT4K,KAEhD,OACE,6BACGD,GAAa,yBAAKhK,UAAU,YAAYmI,QAAS,kBAAM8B,OACxD,yBAAKjK,UAAW,CAAC,OAAQgK,EAAY,OAAS,IAAIjF,OAAOkD,SAASC,KAAK,MACrE,yBAAKlI,UAAU,cAAc2F,GAC7B,4BACGC,GACCA,EAAQM,KAAI,SAAAgE,GAAM,OAChB,kBAAC,GAAD,eAAU7E,IAAK6E,EAAOrE,OAAWqE,EAAjC,CAAyCnE,YAAaA,cCsFrDoE,oBACb,SAAA1D,GACE,OAAO,eAAKA,MAEd,SAAA1C,GACE,MAAO,CAAEA,cALEoG,EArGf,SAAa9K,GAAQ,IAEjBO,EAeEP,EAfFO,YACAF,EAcEL,EAdFK,aACAC,EAaEN,EAbFM,cACA6B,EAYEnC,EAZFmC,SACAlC,EAWED,EAXFC,UACAC,EAUEF,EAVFE,WACAC,EASEH,EATFG,UACAC,EAQEJ,EARFI,WACAI,EAOER,EAPFQ,YACA4B,EAMEpC,EANFoC,MACAC,EAKErC,EALFqC,WACAC,EAIEtC,EAJFsC,KACAC,EAGEvC,EAHFuC,cACAC,EAEExC,EAFFwC,eACAkC,EACE1E,EADF0E,SAGIqG,EAAMxB,mBAAQ,WAClB,OAAOyB,YAAmBC,EAASvG,KAClC,CAACA,IAEJwG,qBAAU,WACR,IAAMC,EAAUC,IAAIC,WAAW9D,OAAO+D,SAASC,QAEvChL,EAAyD4K,EAAzD5K,YAAaF,EAA4C8K,EAA5C9K,aAAcC,EAA8B6K,EAA9B7K,cAAeoC,EAAeyI,EAAfzI,KAAM/C,EAASwL,EAATxL,KAGtDyD,EAME2H,EANF3H,eACAJ,EAKE+H,EALF/H,gBACAE,EAIE6H,EAJF7H,iBACAC,EAGE4H,EAHF5H,YACAV,EAEEsI,EAFFtI,aACAyE,EACE6D,EADF7D,gBAGF9D,EAAe7C,GACfyC,EAAgB3C,GAChB6C,EAAiB5C,GACjB6C,EAAYT,GACZD,EAAa5B,YAAGjB,IAAMD,GAAM6L,YAE5BtE,GAAgB,KACf,CAAC6D,IAEJG,qBAAU,WACR,GAAK1I,EAAL,CAEA,IAAMyF,EAAM,IAAImD,IAAI,eACjBK,UAAU,WAAYpL,GACtBoL,UAAU,WAAYnL,GACtBmL,UAAU,OAAQtJ,GAClBsJ,UAAU,OAAQ7L,IAAMK,GAAWR,OAAO,eAC1C0E,WAEH4G,EAAI/C,aAAaC,MAChB,CAACzF,EAAgBnC,EAAcC,EAAe6B,EAAUlC,EAAW8K,IAEtE,IAAMW,EAAaC,uBAAY,WAC7BpE,OAAOqE,QAAQC,SACd,IAEH,OAAKrJ,EAGH,yBAAK7B,UAAU,OACb,yBAAKA,UAAU,kBACb,kBAACmL,EAAA,EAAD,CAAQxF,MAAM,2BAAOoF,WAAYA,EAAYK,eAAe,KAE9D,kBAACjM,EAAA,EAAD,CACEG,UAAWA,EACXC,WAAYA,EACZC,UAAWA,EACXC,WAAYA,EACZC,aAAcA,EACdC,cAAeA,EACfC,YAAaA,EACbC,YAAaA,GACb,0BAAMwL,MAAO,CAAEC,QAAS,SAAWtL,UAAU,gBAE/C,kBAAC,GAAD,CAAQyB,MAAOA,EAAOM,KAAMP,IAC5B,kBAAC,GAAD,CACEE,WAAYA,EACZoC,YAAasG,EAAItG,YACjBW,YAAa2F,EAAI3F,YACjBK,gBAAiBsF,EAAItF,gBACrBE,gBAAiBoF,EAAIpF,gBACrBS,eAAgB2E,EAAI3E,eACpBQ,oBAAqBmE,EAAInE,oBACzBG,mBAAoBgE,EAAIhE,qBAEzB1E,EAAWwB,OAAS,GACnB,kBAAC,EAAD,CAAQxB,WAAYA,EAAYsD,gBAAiBoF,EAAIpF,kBAEvD,kBAAC,EAAD,CAAS9B,OAAQxB,EAAWwB,OAAQzB,MAAOA,IAC3C,kBAAC,GAAD,eAAMuI,UAAWpI,GAAmBD,EAApC,CAA0CsI,KAAMG,EAAIpE,aAjC5B,QCrE9BuF,IAASC,OACP,kBAAC,IAAD,CAAUC,MAAOA,GACf,kBAAC,GAAD,OAEFC,SAASC,eAAe,SAIxBC,O,+BCnBF,0BAoCeT,IAhCf,SAAgB9L,GAAQ,IACdsG,EAA0CtG,EAA1CsG,MADa,EAC6BtG,EAAnC+L,qBADM,SACcL,EAAe1L,EAAf0L,WACnC,OACE,yBAAK/K,UAAU,UAEXoL,EACE,yBAAKpL,UAAU,cAAcmI,QAAS4C,GACpC,yBAAKc,MAAM,KAAKC,OAAO,MACrB,8BACEC,OAAO,oBACPC,OAAO,OACPC,YAAY,IACZC,KAAK,WAIT,KAGN,wBAAIlM,UAAU,gBACX2F,M,+BCxBT,kCAYA,IAAMwG,EAAclE,QACW,cAA7BrB,OAAO+D,SAASyB,UAEe,UAA7BxF,OAAO+D,SAASyB,UAEhBxF,OAAO+D,SAASyB,SAASC,MACvB,2DAIC,SAASC,EAASC,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIC,IAAIC,gBAAwB9F,OAAO+D,SAASgC,MACpDC,SAAWhG,OAAO+D,SAASiC,OAIvC,OAGFhG,OAAOiG,iBAAiB,QAAQ,WAC9B,IAAMC,EAAK,UAAMJ,gBAAN,sBAEPP,IAgEV,SAAiCW,EAAOP,GAEtChF,MAAMuF,EAAO,CACXC,QAAS,CAAE,iBAAkB,YAE5BvF,MAAK,SAAAwF,GAEJ,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5CZ,UAAUZ,cAAcyB,MAAM7F,MAAK,SAAA8F,GACjCA,EAAaC,aAAa/F,MAAK,WAC7BZ,OAAO+D,SAAS6C,eAKpBC,EAAgBX,EAAOP,MAG1BmB,OAAM,WACLC,QAAQC,IACN,oEAvFAC,CAAwBf,EAAOP,GAI/BC,UAAUZ,cAAcyB,MAAM7F,MAAK,WACjCmG,QAAQC,IACN,iHAMJH,EAAgBX,EAAOP,OAM/B,SAASkB,EAAgBX,EAAOP,GAC9BC,UAAUZ,cACPU,SAASQ,GACTtF,MAAK,SAAA8F,GACJA,EAAaQ,cAAgB,WAC3B,IAAMC,EAAmBT,EAAaU,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBtH,QACf+F,UAAUZ,cAAcsC,YAI1BP,QAAQC,IACN,iHAKErB,GAAUA,EAAO4B,UACnB5B,EAAO4B,SAASb,KAMlBK,QAAQC,IAAI,sCAGRrB,GAAUA,EAAO6B,WACnB7B,EAAO6B,UAAUd,WAO5BI,OAAM,SAAAW,GACLV,QAAQU,MAAM,4CAA6CA,S","file":"static/js/order.81fbd2f0.chunk.js","sourcesContent":["import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/zh-cn';\n\nimport './Detail.css';\n\nfunction format(d) {\n  const date = dayjs(d);\n\n  return date.format('MM-DD') + ' ' + date.locale('zh-cn').format('ddd');\n}\nconst Detail = memo(function Detail(props) {\n  const {\n    leaveDate,\n    arriveDate,\n    leaveTime,\n    arriveTime,\n    leaveStation,\n    arriveStation,\n    trainNumber,\n    durationStr\n  } = props;\n\n  const leaveDateStr = format(leaveDate);\n  const arriveDateStr = format(arriveDate);\n\n  return (\n    <div className='detail'>\n      <div className='content'>\n        <div className='left'>\n          <p className='city'>{leaveStation}</p>\n          <p className='time'>{leaveTime}</p>\n          <p className='date'>{leaveDateStr}</p>\n        </div>\n        <div className='middle'>\n          <div className='train-name'>{trainNumber}</div>\n          <p className='train-mid'>{props.children}</p>\n          <p className='train-time'>耗时{durationStr}</p>\n        </div>\n        <div className='right'>\n          <p className='city'>{arriveStation}</p>\n          <p className='time'>{arriveTime}</p>\n          <p className='date'>{arriveDateStr}</p>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nDetail.propTypes = {\n  leaveDate: PropTypes.number.isRequired,\n  arriveDate: PropTypes.number.isRequired,\n  leaveTime: PropTypes.string,\n  arriveTime: PropTypes.string,\n  leaveStation: PropTypes.string.isRequired,\n  arriveStation: PropTypes.string.isRequired,\n  trainNumber: PropTypes.string.isRequired,\n  durationStr: PropTypes.string\n};\n\nexport default Detail;\n","export function h0(timestamp = Date.now()) {\n  const target = new Date(timestamp);\n\n  target.setHours(0);\n  target.setMinutes(0);\n  target.setSeconds(0);\n  target.setMilliseconds(0);\n\n  return target.getTime();\n}\n\nexport function debounce(fn, cb, wait = 350) {\n  let timer;\n  return function(...args) {\n    let context = this;\n\n    if (timer) {\n      clearTimeout(timer);\n      cb.apply(context, args);\n    }\n\n    timer = setTimeout(() => {\n      fn.apply(context, args);\n    }, wait);\n  };\n}\n","const initState = {\n  trainNumber: null,\n  leaveStation: null,\n  arriveStation: null,\n  seatType: null,\n  leaveDate: Date.now(),\n  arriveDate: Date.now(),\n  leaveTime: null,\n  arriveTime: null,\n  durationStr: null,\n  price: null,\n  passengers: [],\n  menu: null,\n  isMenuVisible: false,\n  isSearchParsed: false\n};\n\nexport default initState;\n","import { SET_LEAVE_DATE, SET_ARRIVE_DATE } from './actionTypes';\n\nexport function setLeaveDate(date) {\n  return {\n    type: SET_LEAVE_DATE,\n    payload: date\n  };\n}\n\nexport function setArriveDate(date) {\n  return {\n    type: SET_ARRIVE_DATE,\n    payload: date\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_LEAVE_DATE:\n      return { ...state, leaveDate: payload };\n    case SET_ARRIVE_DATE:\n      return { ...state, arriveDate: payload };\n    default:\n      return state;\n  }\n}\n","export const SET_LEAVE_DATE = 'SET_LEAVE_DATE';\nexport const SET_ARRIVE_DATE = 'SET_ARRIVE_DATE';\nexport const SET_LEAVE_TIME = 'SET_LEAVE_TIME';\nexport const SET_ARRIVE_TIME = 'SET_ARRIVE_TIME';\nexport const SET_LEAVE_STATION = 'SET_LEAVE_STATION';\nexport const SET_ARRIVE_STATION = 'SET_ARRIVE_STATION';\nexport const SET_TRAIN_NUMBER = 'SET_TRAIN_NUMBER';\nexport const SET_DURATION_STR = 'SET_DURATION_STR';\nexport const SET_SEAT_TYPE = 'SET_SEAT_TYPE';\nexport const SET_PRICE = 'SET_PRICE';\nexport const SET_PASSENGERS = 'SET_PASSENGERS';\nexport const SET_MENU = 'SET_MENU';\nexport const TOGGLE_MENU_VISIBLE = 'TOGGLE_MENU_VISIBLE';\nexport const SET_SEARCH_PARSED = 'SET_SEARCH_PARSED';\n","import { SET_LEAVE_TIME, SET_ARRIVE_TIME } from './actionTypes';\n\nexport function setLeaveTime(time) {\n  return {\n    type: SET_LEAVE_TIME,\n    payload: time\n  };\n}\n\nexport function setArriveTime(time) {\n  return {\n    type: SET_ARRIVE_TIME,\n    payload: time\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_LEAVE_TIME:\n      return { ...state, leaveTime: payload };\n    case SET_ARRIVE_TIME:\n      return { ...state, arriveTime: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_LEAVE_STATION, SET_ARRIVE_STATION } from './actionTypes';\n\nexport function setLeaveStation(station) {\n  return {\n    type: SET_LEAVE_STATION,\n    payload: station\n  };\n}\n\nexport function setArriveStation(station) {\n  return {\n    type: SET_ARRIVE_STATION,\n    payload: station\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_LEAVE_STATION:\n      return { ...state, leaveStation: payload };\n    case SET_ARRIVE_STATION:\n      return { ...state, arriveStation: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_SEAT_TYPE } from './actionTypes';\n\nexport function setSeatType(seatType) {\n  return {\n    type: SET_SEAT_TYPE,\n    payload: seatType\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_SEAT_TYPE:\n      return { ...state, seatType: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_TRAIN_NUMBER } from './actionTypes';\n\nexport function setTrainNumber(trainNumber) {\n  return {\n    type: SET_TRAIN_NUMBER,\n    payload: trainNumber\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_TRAIN_NUMBER:\n      return { ...state, trainNumber: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_DURATION_STR } from './actionTypes';\n\nexport function setDurationStr(durationStr) {\n  return {\n    type: SET_DURATION_STR,\n    payload: durationStr\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_DURATION_STR:\n      return { ...state, durationStr: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_PRICE } from './actionTypes';\n\nexport function setPrice(price) {\n  return {\n    type: SET_PRICE,\n    payload: price\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_PRICE:\n      return { ...state, price: payload };\n    default:\n      return state;\n  }\n}\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import { SET_PASSENGERS } from './actionTypes';\n\nexport function setPassengers(passengers) {\n  return {\n    type: SET_PASSENGERS,\n    payload: passengers\n  };\n}\n\nlet passengerIdSeed = 0;\n\nexport function createAdult() {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    // 如果上一个信息中有任何没有填写完成的信息, 将不会继续添加\n    // 这里只是简单判断是否为空\n    for (const passenger of passengers) {\n      const keys = Object.keys(passenger);\n\n      for (const key of keys) {\n        if (!passenger[key]) {\n          alert('请将信息填写完整');\n          return;\n        }\n      }\n    }\n\n    dispatch(\n      setPassengers([\n        ...passengers,\n        {\n          id: ++passengerIdSeed,\n          name: '',\n          ticketType: 'adult',\n          licenceNo: '',\n          seat: 'Z'\n        }\n      ])\n    );\n  };\n}\n\nexport function createChild() {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    let adultFound = null;\n\n    // 如果上一个信息中有任何没有填写完成的信息, 将不会继续添加\n    // 这里只是简单判断是否为空\n    for (const passenger of passengers) {\n      const keys = Object.keys(passenger);\n\n      for (const key of keys) {\n        if (!passenger[key]) {\n          alert('请将信息填写完整');\n          return;\n        }\n      }\n\n      if (passenger.ticketType === 'adult') {\n        adultFound = passenger.id;\n      }\n    }\n\n    // 添加儿童至少需要有一个同行成人\n    if (!adultFound) {\n      alert('请至少正确添加一个同行成人');\n      return;\n    }\n\n    dispatch(\n      setPassengers([\n        ...passengers,\n        {\n          id: ++passengerIdSeed,\n          name: '',\n          gender: '',\n          birthday: '',\n          followAdult: adultFound,\n          ticketType: 'child',\n          seat: 'Z'\n        }\n      ])\n    );\n  };\n}\n\nexport function removePassenger(id) {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    // 过滤掉具有这个 id 的乘客, 同时过滤掉这个乘客同行的儿童\n    const newPassengers = passengers.filter(\n      passenger => passenger.id !== id && passenger.followAdult !== id\n    );\n\n    dispatch(setPassengers(newPassengers));\n  };\n}\n\nexport function updatePassenger(id, data, removeKeys = []) {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    for (let i = 0; i < passengers.length; i++) {\n      if (passengers[i].id === id) {\n        const newPassengers = [...passengers];\n        newPassengers[i] = Object.assign({}, passengers[i], data);\n\n        for (const key of removeKeys) {\n          delete newPassengers[i][key];\n        }\n\n        dispatch(setPassengers(newPassengers));\n\n        break;\n      }\n    }\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_PASSENGERS:\n      return { ...state, passengers: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_MENU, TOGGLE_MENU_VISIBLE } from './actionTypes';\nimport { updatePassenger } from './setPassengers';\n\nexport function setMenu(menu) {\n  return {\n    type: SET_MENU,\n    payload: menu\n  };\n}\n\nexport function setMenuVisible(isMenuVisible) {\n  return {\n    type: TOGGLE_MENU_VISIBLE,\n    payload: isMenuVisible\n  };\n}\n\nexport function showMenu(menu) {\n  return dispatch => {\n    dispatch(setMenu(menu));\n    dispatch(setMenuVisible(true));\n  };\n}\n\nexport function showGenderMenu(id) {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    const passenger = passengers.find(passenger => passenger.id === id);\n\n    if (!passenger) return;\n\n    dispatch(\n      showMenu({\n        title: '请选择性别',\n        options: [\n          {\n            title: '男',\n            value: 'male',\n            active: 'male' === passenger.gender\n          },\n          {\n            title: '女',\n            value: 'female',\n            active: 'female' === passenger.gender\n          }\n        ],\n        handleClick(gender) {\n          dispatch(updatePassenger(id, { gender }));\n          dispatch(hideMenu());\n        }\n      })\n    );\n  };\n}\n\nexport function showFollowAdultMenu(id) {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    const passenger = passengers.find(passenger => passenger.id === id);\n\n    if (!passenger) return;\n\n    dispatch(\n      showMenu({\n        title: '请选择同行成人',\n        options: passengers\n          .filter(passenger => passenger.ticketType === 'adult')\n          .map(adult => ({\n            title: adult.name,\n            value: adult.id,\n            active: adult.id === passenger.followAdult\n          })),\n        handleClick(followAdult) {\n          dispatch(updatePassenger(id, { followAdult }));\n          dispatch(hideMenu());\n        }\n      })\n    );\n  };\n}\n\nexport function showTicketTypeMenu(id) {\n  return (dispatch, getState) => {\n    const { passengers } = getState();\n\n    const passenger = passengers.find(passenger => passenger.id === id);\n\n    if (!passenger) return;\n\n    dispatch(\n      showMenu({\n        title: '请选择同行成人',\n        options: [\n          {\n            title: '成人票',\n            value: 'adult',\n            active: passenger.ticketType === 'adult'\n          },\n          {\n            title: ' 儿童票',\n            value: 'child',\n            active: passenger.ticketType === 'child'\n          }\n        ],\n        handleClick(ticketType) {\n          if (ticketType === 'adult') {\n            dispatch(\n              updatePassenger(\n                id,\n                {\n                  licenceNo: '',\n                  ticketType\n                },\n                ['gender', 'followAdult', 'birthday']\n              )\n            );\n          } else {\n            const adult = passengers.find(\n              passenger => passenger.id !== id && passenger.ticketType === 'adult'\n            );\n\n            const children = passengers.filter(passenger => passenger.followAdult === id);\n\n            if (adult) {\n              dispatch(\n                updatePassenger(\n                  id,\n                  {\n                    ticketType,\n                    gender: '',\n                    followAdult: adult.id,\n                    birthday: ''\n                  },\n                  ['licenceNo']\n                )\n              );\n              children.forEach(child => {\n                const id = child.id;\n\n                dispatch(\n                  updatePassenger(id, {\n                    followAdult: adult.id\n                  })\n                );\n              });\n            } else {\n              alert('必须至少有一个成人乘客');\n            }\n          }\n          dispatch(hideMenu());\n        }\n      })\n    );\n  };\n}\n\nexport function hideMenu() {\n  return setMenuVisible(false);\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_MENU:\n      return { ...state, menu: payload };\n    case TOGGLE_MENU_VISIBLE:\n      return { ...state, isMenuVisible: payload };\n    default:\n      return state;\n  }\n}\n","import { SET_SEARCH_PARSED } from './actionTypes';\n\nexport function setSearchParsed() {\n  return {\n    type: SET_SEARCH_PARSED,\n    payload: true\n  };\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_SEARCH_PARSED:\n      return { ...state, isSearchParsed: payload };\n    default:\n      return state;\n  }\n}\n","import initState from './initState';\nimport { reducer as setDateReducer } from './setDate';\nimport { reducer as setTimeReducer } from './setTime';\nimport { reducer as setStationReducer } from './setStation';\nimport { reducer as setSeatTypeReducer } from './setSeatType';\nimport { reducer as setTrainNumberReducer } from './setTrainNumber';\nimport { reducer as setDurationStrReducer } from './setDurationStr';\nimport { reducer as setPriceReducer } from './setPrice';\nimport { reducer as setPassengersReducer } from './setPassengers';\nimport { reducer as setMenuReducer } from './setMenu';\nimport { reducer as setSearchParsedReducer } from './setSearchParsed';\n\nconst reducers = [\n  setDateReducer,\n  setTimeReducer,\n  setStationReducer,\n  setSeatTypeReducer,\n  setTrainNumberReducer,\n  setDurationStrReducer,\n  setPriceReducer,\n  setPassengersReducer,\n  setMenuReducer,\n  setSearchParsedReducer\n];\n\nexport default function reducer(state = initState, action) {\n  return reducers.reduce((s, r) => r(s, action), state);\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\n\nimport reducer from './reducers';\nimport thunk from 'redux-thunk';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport default createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\n","import { setLeaveTime, setArriveTime } from './setTime';\nimport { setArriveDate } from './setDate';\nimport { setDurationStr } from './setDurationStr';\nimport { setPrice } from './setPrice';\nexport function fetchInitial(url) {\n  return dispatch => {\n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        const { departTimeStr, arriveTimeStr, arriveDate, durationStr, price } = data;\n\n        dispatch(setLeaveTime(departTimeStr));\n        dispatch(setArriveTime(arriveTimeStr));\n        dispatch(setArriveDate(arriveDate));\n        dispatch(setDurationStr(durationStr));\n        dispatch(setPrice(price));\n      });\n  };\n}\n","import React, { memo, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './Account.css';\n\nconst Account = memo(function Account(props) {\n  const { price, length } = props;\n\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <div className='account'>\n      <div\n        className={['price', expanded ? 'expanded' : ''].filter(Boolean).join(' ')}\n        onClick={() => setExpanded(!expanded)}>\n        <div className='money'>{length * price}</div>\n        <div className='amount'>支付金额</div>\n      </div>\n      <div className='button'>提交订单</div>\n      <div\n        className={['layer', expanded ? '' : 'hidden'].filter(Boolean).join(' ')}\n        onClick={() => setExpanded(false)}></div>\n      <div\n        className={['detail', expanded ? '' : 'hidden'].filter(Boolean).join(' ')}\n        onClick={() => setExpanded(false)}>\n        <div className='title'>金额详情</div>\n        <ul>\n          {length > 0 ? (\n            <li>\n              <span>火车票</span>\n              <span>${price}</span>\n              <span>&#xD7;{length}</span>\n            </li>\n          ) : (\n            <li>\n              <span>无</span>\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n});\nAccount.propTypes = {\n  price: PropTypes.number,\n  length: PropTypes.number.isRequired\n};\n\nexport default Account;\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './Choose.css';\n\nconst Seat = memo(function Seat(props) {\n  const { seatType, updatePassenger, id, seat } = props;\n  return (\n    <p\n      className={['seat', seat === seatType ? 'active' : ''].filter(Boolean).join(' ')}\n      data-text={seatType}\n      onClick={() => updatePassenger(id, { seat: seatType })}>\n      &#xe02d;\n    </p>\n  );\n});\nSeat.propTypes = {\n  seatType: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  seat: PropTypes.string.isRequired,\n  updatePassenger: PropTypes.func.isRequired\n};\n\nconst Choose = memo(function Choose(props) {\n  const { passengers, updatePassenger } = props;\n\n  return (\n    <div className='choose'>\n      <p className='tip'>在线选座</p>\n      <div className='container'>\n        {passengers.map(passenger => (\n          <div className='seats' key={passenger.id}>\n            <div>窗</div>\n            <Seat {...passenger} seatType='A' updatePassenger={updatePassenger} />\n            <Seat {...passenger} seatType='B' updatePassenger={updatePassenger} />\n            <Seat {...passenger} seatType='C' updatePassenger={updatePassenger} />\n            <div>过道</div>\n            <Seat {...passenger} seatType='D' updatePassenger={updatePassenger} />\n            <Seat {...passenger} seatType='F' updatePassenger={updatePassenger} />\n            <div>窗</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\nChoose.propTypes = {\n  passengers: PropTypes.array.isRequired,\n  updatePassenger: PropTypes.func.isRequired\n};\n\nexport default Choose;\n","import React, { memo, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { debounce } from '../../common/fp';\n\nimport './Passengers.css';\n\nconst Passenger = memo(function Passenger(props) {\n  const {\n    id,\n    name,\n    followAdultName,\n    ticketType,\n    licenceNo,\n    gender,\n    birthday,\n    handleRemove,\n    handleUpdate,\n    showGenderMenu,\n    showFollowAdultMenu,\n    showTicketTypeMenu\n  } = props;\n\n  const isAdult = useMemo(() => ticketType === 'adult', [ticketType]);\n\n  const [curName, setCurName] = useState(name);\n  const [curLicenceNo, setCurLicenceNo] = useState(licenceNo);\n  const [curBirthday, setCurBirthday] = useState(birthday);\n\n  const { updateName, updateLicenceNo, updateBirthday } = useMemo(() => {\n    return {\n      updateName: debounce(\n        value => handleUpdate(id, { name: value }),\n        value => setCurName(value)\n      ),\n      updateLicenceNo: debounce(\n        value => handleUpdate(id, { licenceNo: value }),\n        value => setCurLicenceNo(value)\n      ),\n      updateBirthday: debounce(\n        value => handleUpdate(id, { birthday: value }),\n        value => setCurBirthday(value)\n      )\n    };\n  }, [id, handleUpdate]);\n\n  return (\n    <li className='passenger'>\n      <i className='delete' onClick={() => handleRemove(id)}>\n        －\n      </i>\n      <ol className='items'>\n        <li className='item'>\n          <label className='label name'>姓名</label>\n          <input\n            type='text'\n            className='input name'\n            placeholder='乘客姓名'\n            value={curName}\n            onChange={e => updateName(e.target.value)}\n          />\n          <label className='ticket-type' onClick={() => showTicketTypeMenu(id)}>\n            {ticketType === 'adult' ? '成人票' : '儿童票'}\n          </label>\n        </li>\n        {isAdult && (\n          <li className='item'>\n            <label className='label licenceNo'>身份证</label>\n            <input\n              type='text'\n              className='input licenceNo'\n              placeholder='乘客身份证号'\n              value={curLicenceNo}\n              onChange={e => updateLicenceNo(e.target.value)}\n            />\n          </li>\n        )}\n        {!isAdult && (\n          <li className='item arrow'>\n            <label className='label gender'>性别</label>\n            <input\n              type='text'\n              className='input gender'\n              placeholder='请选择'\n              value={gender === 'male' ? '男' : gender === 'female' ? '女' : ''}\n              readOnly\n              onClick={() => showGenderMenu(id)}\n            />\n          </li>\n        )}\n        {!isAdult && (\n          <li className='item'>\n            <label className='label birthday'>生日</label>\n            <input\n              type='text'\n              className='input birthday'\n              placeholder='如: 1995年1月5日, 则填写19950105'\n              value={curBirthday}\n              onChange={e => updateBirthday(e.target.value)}\n            />\n          </li>\n        )}\n        {!isAdult && (\n          <li className='item arrow'>\n            <label className='label followAdult'>同行成人</label>\n            <input\n              type='text'\n              className='input followAdult'\n              placeholder='请选择'\n              value={followAdultName}\n              readOnly\n              onClick={() => showFollowAdultMenu(id)}\n            />\n          </li>\n        )}\n      </ol>\n    </li>\n  );\n});\nPassenger.propTypes = {\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  followAdult: PropTypes.number,\n  followAdultName: PropTypes.string,\n  ticketType: PropTypes.string.isRequired,\n  licenceNo: PropTypes.string,\n  gender: PropTypes.string,\n  birthday: PropTypes.string,\n  handleRemove: PropTypes.func.isRequired,\n  handleUpdate: PropTypes.func.isRequired,\n  showGenderMenu: PropTypes.func.isRequired,\n  showFollowAdultMenu: PropTypes.func.isRequired,\n  showTicketTypeMenu: PropTypes.func.isRequired\n};\n\nconst Passengers = memo(function Passengers(props) {\n  const {\n    passengers,\n    createAdult,\n    createChild,\n    removePassenger,\n    updatePassenger,\n    showGenderMenu,\n    showFollowAdultMenu,\n    showTicketTypeMenu\n  } = props;\n\n  const nameMap = useMemo(() => {\n    const ret = {};\n    for (const passenger of passengers) {\n      ret[passenger.id] = passenger.name;\n    }\n    return ret;\n  }, [passengers]);\n\n  return (\n    <div className='passengers'>\n      <ul>\n        {passengers.map(passenger => {\n          return (\n            <Passenger\n              key={passenger.id}\n              {...passenger}\n              followAdultName={nameMap[passenger.followAdult]}\n              handleRemove={removePassenger}\n              handleUpdate={updatePassenger}\n              showGenderMenu={showGenderMenu}\n              showFollowAdultMenu={showFollowAdultMenu}\n              showTicketTypeMenu={showTicketTypeMenu}\n            />\n          );\n        })}\n      </ul>\n      <section className='add'>\n        <div className='adult' onClick={() => createAdult()}>\n          添加成人\n        </div>\n        <div className='child' onClick={() => createChild()}>\n          添加儿童\n        </div>\n      </section>\n    </div>\n  );\n});\nPassengers.propTypes = {\n  passengers: PropTypes.array.isRequired,\n  createAdult: PropTypes.func.isRequired,\n  createChild: PropTypes.func.isRequired,\n  removePassenger: PropTypes.func.isRequired,\n  updatePassenger: PropTypes.func.isRequired,\n  showGenderMenu: PropTypes.func.isRequired,\n  showFollowAdultMenu: PropTypes.func.isRequired,\n  showTicketTypeMenu: PropTypes.func.isRequired\n};\n\nexport default Passengers;\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './Ticket.css';\n\nconst Ticket = memo(function Ticket(props) {\n  const { price, type } = props;\n\n  return (\n    <div className='ticket'>\n      <p>\n        <span className='ticket-type'>{type}</span>\n        <span className='ticket-price'>{price}</span>\n      </p>\n      <div className='label'>坐席</div>\n    </div>\n  );\n});\nTicket.propTypes = {\n  price: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  type: PropTypes.string.isRequired\n};\n\nexport default Ticket;\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './Menu.css';\n\nconst MenuItem = memo(function MenuItem(props) {\n  const { title, value, active, handleClick } = props;\n\n  return (\n    <li className={active ? 'active' : ''} onClick={() => handleClick(value)}>\n      {title}\n    </li>\n  );\n});\nMenuItem.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  active: PropTypes.bool.isRequired,\n  handleClick: PropTypes.func.isRequired\n};\n\nconst Menu = memo(function Menu(props) {\n  const { isVisible, title, options, handleClick, hide } = props;\n\n  return (\n    <div>\n      {isVisible && <div className='menu-mask' onClick={() => hide()}></div>}\n      <div className={['menu', isVisible ? 'show' : ''].filter(Boolean).join(' ')}>\n        <div className='menu-title'>{title}</div>\n        <ul>\n          {options &&\n            options.map(option => (\n              <MenuItem key={option.value} {...option} handleClick={handleClick} />\n            ))}\n        </ul>\n      </div>\n    </div>\n  );\n});\nMenu.propTypes = {\n  isVisible: PropTypes.bool.isRequired,\n  title: PropTypes.string,\n  options: PropTypes.array,\n  handleClick: PropTypes.func,\n  hide: PropTypes.func.isRequired\n};\n\nexport default Menu;\n","import React, { useCallback, useEffect, useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as actions from './store/actions';\nimport URI from 'urijs';\nimport dayjs from 'dayjs';\nimport { h0 } from '../common/fp';\n\nimport './App.css';\nimport Header from '../common/Header';\nimport Detail from '../common/Detail';\nimport Account from './components/Account';\nimport Choose from './components/Choose';\nimport Passengers from './components/Passengers';\nimport Ticket from './components/Ticket';\nimport Menu from './components/Menu';\n\nfunction App(props) {\n  const {\n    trainNumber,\n    leaveStation,\n    arriveStation,\n    seatType,\n    leaveDate,\n    arriveDate,\n    leaveTime,\n    arriveTime,\n    durationStr,\n    price,\n    passengers,\n    menu,\n    isMenuVisible,\n    isSearchParsed,\n    dispatch\n  } = props;\n\n  const cbs = useMemo(() => {\n    return bindActionCreators(actions, dispatch);\n  }, [dispatch]);\n\n  useEffect(() => {\n    const queries = URI.parseQuery(window.location.search);\n\n    const { trainNumber, leaveStation, arriveStation, type, date } = queries;\n\n    const {\n      setTrainNumber,\n      setLeaveStation,\n      setArriveStation,\n      setSeatType,\n      setLeaveDate,\n      setSearchParsed\n    } = cbs;\n\n    setTrainNumber(trainNumber);\n    setLeaveStation(leaveStation);\n    setArriveStation(arriveStation);\n    setSeatType(type);\n    setLeaveDate(h0(dayjs(date).valueOf()));\n\n    setSearchParsed(true);\n  }, [cbs]);\n\n  useEffect(() => {\n    if (!isSearchParsed) return;\n\n    const url = new URI('/rest/order')\n      .setSearch('dStation', leaveStation)\n      .setSearch('aStation', arriveStation)\n      .setSearch('type', seatType)\n      .setSearch('date', dayjs(leaveDate).format('YYYY-MM-DD'))\n      .toString();\n\n    cbs.fetchInitial(url);\n  }, [isSearchParsed, leaveStation, arriveStation, seatType, leaveDate, cbs]);\n\n  const handleBack = useCallback(() => {\n    window.history.back();\n  }, []);\n\n  if (!isSearchParsed) return null;\n\n  return (\n    <div className='app'>\n      <div className='header-wrapper'>\n        <Header title='订单填写' handleBack={handleBack} isBackVisible={true} />\n      </div>\n      <Detail\n        leaveDate={leaveDate}\n        arriveDate={arriveDate}\n        leaveTime={leaveTime}\n        arriveTime={arriveTime}\n        leaveStation={leaveStation}\n        arriveStation={arriveStation}\n        trainNumber={trainNumber}\n        durationStr={durationStr}>\n        <span style={{ display: 'block' }} className='train-icon'></span>\n      </Detail>\n      <Ticket price={price} type={seatType} />\n      <Passengers\n        passengers={passengers}\n        createAdult={cbs.createAdult}\n        createChild={cbs.createChild}\n        removePassenger={cbs.removePassenger}\n        updatePassenger={cbs.updatePassenger}\n        showGenderMenu={cbs.showGenderMenu}\n        showFollowAdultMenu={cbs.showFollowAdultMenu}\n        showTicketTypeMenu={cbs.showTicketTypeMenu}\n      />\n      {passengers.length > 0 && (\n        <Choose passengers={passengers} updatePassenger={cbs.updatePassenger} />\n      )}\n      <Account length={passengers.length} price={price} />\n      <Menu isVisible={isMenuVisible} {...menu} hide={cbs.hideMenu} />\n    </div>\n  );\n}\n\nexport default connect(\n  state => {\n    return { ...state };\n  },\n  dispatch => {\n    return { dispatch };\n  }\n)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport 'normalize.css/normalize.css';\nimport * as serviceWorker from '../serviceWorker';\n\n// 引入样式文件/store/根组件, 完成 index 的初始化\nimport store from './store';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nif (process.env.NODE_ENV === 'production') {\n  serviceWorker.register();\n} else {\n  serviceWorker.unregister();\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Header.css'\n\nfunction Header(props) {\n  const { title, isBackVisible=true, handleBack } = props;\n  return (\n    <div className=\"header\">\n      {\n        isBackVisible ?\n          <div className=\"header-back\" onClick={handleBack}>\n            <svg width=\"42\" height=\"42\">\n              <polyline\n                points=\"25,13 16,21 25,29\"\n                stroke=\"#fff\"\n                strokeWidth=\"2\"\n                fill=\"none\"\n              />\n            </svg>\n          </div>\n          : null\n      }\n      \n      <h1 className=\"header-title\">\n        {title}\n      </h1>\n    </div>\n  )\n}\n\nHeader.propTypes = {\n  handleBack: PropTypes.func.isRequired,\n  isBackVisible: PropTypes.bool,\n  title: PropTypes.string.isRequired\n}\n\nexport default Header;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}