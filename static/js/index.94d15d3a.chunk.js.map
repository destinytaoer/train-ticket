{"version":3,"sources":["common/fp.js","index/components/imgs/switch.svg","common/Header.js","index/store/initState.js","index/store/setCityDataLoading.js","index/store/actionTypes.js","index/store/setCityData.js","index/store/setCitySelectorVisible.js","index/store/setDateSelectorVisible.js","index/store/setSelectedCity.js","index/store/toggleHighSpeed.js","index/store/setDate.js","index/store/reducers.js","index/store/index.js","index/components/Journey.js","index/components/DepartDate.js","index/components/HighSpeed.js","index/components/Submit.js","common/CitySelector.js","common/DateSelector.js","index/App.js","index/index.js","serviceWorker.js"],"names":["h0","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","debounce","fn","cb","timer","wait","args","context","this","clearTimeout","apply","setTimeout","module","exports","Header","props","title","isBackVisible","handleBack","className","onClick","width","height","points","stroke","strokeWidth","fill","initState","from","to","cityData","isCitySelectorVisible","isLeftCity","isCityDataLoading","date","isDateSelectorVisible","isHighSpeed","setCityDataLoading","type","payload","setCityData","fetchCityData","dispatch","getState","cache","JSON","parse","localStorage","getItem","expires","data","fetch","then","res","json","setItem","stringify","catch","showCitySelector","hideCitySelector","showDateSelector","hideDateSelector","setFrom","city","setTo","setSelectedCity","exchangeFromTo","toggleHighSpeed","setDate","reducers","state","action","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reduce","s","r","applyMiddleware","thunk","Journey","readOnly","name","value","src","switchImg","alt","DepartDate","time","handleClick","newTime","departDate","useMemo","isToday","departDateString","dayjs","format","weekString","getDay","HighSpeed","toggle","filter","Boolean","join","Submit","memo","CityItem","handleSelect","CitySection","cities","key","data-cate","map","AlphaIndex","alpha","CityList","sections","toAlpha","alphabet","Array","ele","index","String","fromCharCode","section","citys","SuggestItem","Suggest","searchKey","useState","result","setResult","useEffect","encodeURIComponent","fallBackResult","length","display","item","CitySelector","show","isLoading","setSearchKey","trim","useCallback","document","querySelector","scrollIntoView","outputCitySections","cityList","placeholder","onChange","e","Day","day","dayStr","getDate","isWeekend","includes","Week","days","Month","startingTimeInMonth","startDay","weeks","currentDay","getMonth","push","concat","lastDay","row","week","slice","colSpan","getFullYear","DateSelector","monthSequence","setMonth","month","connect","cbs","bindActionCreators","actions","history","back","handleSelectDate","ReactDOM","render","store","getElementById","serviceWorker","isLocalhost","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","headers","response","contentType","get","status","indexOf","ready","registration","unregister","reload","registerValidSW","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error"],"mappings":"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","file":"static/js/index.94d15d3a.chunk.js","sourcesContent":["export function h0(timestamp = Date.now()) {\n  const target = new Date(timestamp);\n\n  target.setHours(0);\n  target.setMinutes(0);\n  target.setSeconds(0);\n  target.setMilliseconds(0);\n\n  return target.getTime();\n}\n\nexport function debounce(fn, cb, wait = 350) {\n  let timer;\n  return function(...args) {\n    let context = this;\n\n    if (timer) {\n      clearTimeout(timer);\n      cb.apply(context, args);\n    }\n\n    timer = setTimeout(() => {\n      fn.apply(context, args);\n    }, wait);\n  };\n}\n","module.exports = __webpack_public_path__ + \"static/media/switch.b672b5fb.svg\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Header.css'\n\nfunction Header(props) {\n  const { title, isBackVisible=true, handleBack } = props;\n  return (\n    <div className=\"header\">\n      {\n        isBackVisible ?\n          <div className=\"header-back\" onClick={handleBack}>\n            <svg width=\"42\" height=\"42\">\n              <polyline\n                points=\"25,13 16,21 25,29\"\n                stroke=\"#fff\"\n                strokeWidth=\"2\"\n                fill=\"none\"\n              />\n            </svg>\n          </div>\n          : null\n      }\n      \n      <h1 className=\"header-title\">\n        {title}\n      </h1>\n    </div>\n  )\n}\n\nHeader.propTypes = {\n  handleBack: PropTypes.func.isRequired,\n  isBackVisible: PropTypes.bool,\n  title: PropTypes.string.isRequired\n}\n\nexport default Header;","const initState = {\n  from: '北京',\n  to: '上海',\n  cityData: null,\n  isCitySelectorVisible: false,\n  isLeftCity: false,\n  isCityDataLoading: false,\n  date: Date.now(),\n  isDateSelectorVisible: false,\n  isHighSpeed: false\n};\n\nexport default initState;","import { SET_CITY_DATA_LOADING } from './actionTypes';\n\nexport function setCityDataLoading(isCityDataLoading) {\n  return {\n    type: SET_CITY_DATA_LOADING,\n    payload: isCityDataLoading\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_CITY_DATA_LOADING:\n      return { ...state, isCityDataLoading: payload };\n    default:\n      return state;\n  }\n}","export const SET_FROM = 'SET_FROM';\nexport const SET_TO = 'SET_TO';\nexport const SET_CITY_SELECTOR_VISIBLE = 'SET_CITY_SELECTOR_VISIBLE';\nexport const SET_IS_LEFT_CITY = 'SET_IS_LEFT_CITY';\nexport const SET_CITY_DATA = 'SET_CITY_DATA';\nexport const SET_CITY_DATA_LOADING = 'SET_CITY_DATA_LOADING';\nexport const SET_DATE = 'SET_DATE';\nexport const SET_DATE_SELECTOR_VISIBLE = 'SET_DATE_SELECTOR_VISIBLE';\nexport const TOGGLE_HIGH_SPEED = 'TOGGLE_HIGH_SPEED';","import { SET_CITY_DATA } from './actionTypes';\nimport { setCityDataLoading } from \"./setCityDataLoading\";\nexport function setCityData(cityData) {\n  return {\n    type: SET_CITY_DATA,\n    payload: cityData\n  }\n}\n\nexport function fetchCityData() {\n  return (dispatch, getState) => {\n    const { isCityDataLoading } = getState();\n\n    if (isCityDataLoading) return;\n\n    dispatch(setCityDataLoading(true));\n\n    // 如果本地存储中有城市列表, 并且时间没有过期, 那么直接从本地存储中获取,不发起请求\n    const cache = JSON.parse(localStorage.getItem('city_data_cache') || '{}');\n\n    if (Date.now() < cache.expires) {\n      dispatch(setCityData(cache.data));\n    }\n\n    fetch('/rest/cities?_' + Date.now())\n      .then(res => res.json())\n      .then(cityData => {\n        dispatch(setCityData(cityData));\n\n        localStorage.setItem(\n          'city_data_cache',\n          JSON.stringify({\n            // 过期时间 15 分钟\n            expires: Date.now() +  15 * 60 * 1000,\n            data: cityData,\n          })\n        )\n\n        dispatch(setCityDataLoading(false));\n      })\n      .catch(() => {\n        dispatch(setCityDataLoading(false))\n      })\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_CITY_DATA:\n      return { ...state, cityData: payload };\n    default:\n      return state;\n  }\n}","import { SET_CITY_SELECTOR_VISIBLE, SET_IS_LEFT_CITY } from './actionTypes';\n\nexport function showCitySelector(isLeftCity) {\n  return (dispatch) => {\n    dispatch({\n      type: SET_CITY_SELECTOR_VISIBLE,\n      payload: true\n    });\n    dispatch({\n      type: SET_IS_LEFT_CITY,\n      payload: isLeftCity\n    })\n  }\n}\nexport function hideCitySelector() {\n  return {\n    type: SET_CITY_SELECTOR_VISIBLE,\n    payload: false\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_CITY_SELECTOR_VISIBLE:\n      return { ...state, isCitySelectorVisible: payload };\n    case SET_IS_LEFT_CITY:\n      return { ...state, isLeftCity: payload };\n    default:\n      return state;\n  }\n}","import { SET_DATE_SELECTOR_VISIBLE } from './actionTypes';\n\nexport function showDateSelector() {\n  return {\n    type: SET_DATE_SELECTOR_VISIBLE,\n    payload: true\n  }\n}\n\nexport function hideDateSelector() {\n  return {\n    type: SET_DATE_SELECTOR_VISIBLE,\n    payload: false\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_DATE_SELECTOR_VISIBLE:\n      return { ...state, isDateSelectorVisible: payload };\n    default:\n      return state;\n  }\n}","import { SET_FROM, SET_TO } from './actionTypes';\nimport { hideCitySelector } from \"./setCitySelectorVisible\";\n\nfunction setFrom(city) {\n  return {\n    type: SET_FROM,\n    payload: city\n  }\n}\n\nfunction setTo(city) {\n  return {\n    type: SET_TO,\n    payload: city\n  }\n}\n\nexport function setSelectedCity(city) {\n  return (dispatch, getState) => {\n    const { isLeftCity } = getState();\n    if (isLeftCity) {\n      dispatch(setFrom(city));\n    } else {\n      dispatch(setTo(city))\n    }\n    dispatch(hideCitySelector());\n  }\n}\n\nexport function exchangeFromTo() {\n  return (dispatch, getState) => {\n    const { from, to } = getState();\n    dispatch(setFrom(to));\n    dispatch(setTo(from));\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_FROM:\n      return { ...state, from: payload };\n    case SET_TO:\n      return {...state, to: payload};\n    default:\n      return state;\n  }\n}\n","import { TOGGLE_HIGH_SPEED } from './actionTypes';\n\nexport function toggleHighSpeed(isHighSpeed) {\n  return (dispatch, getState) => {\n    const { isHighSpeed } = getState();\n    dispatch({\n      type: TOGGLE_HIGH_SPEED,\n      payload: !isHighSpeed\n    });\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case TOGGLE_HIGH_SPEED:\n      return { ...state, isHighSpeed: payload };\n    default:\n      return state;\n  }\n}","import { SET_DATE } from './actionTypes';\nexport function setDate(date) {\n  return {\n    type: SET_DATE,\n    payload: date\n  }\n}\n\nexport function reducer(state, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_DATE:\n      return { ...state, date: payload };\n    default:\n      return state;\n  }\n}","import initState from './initState';\nimport { reducer as setCityDataReducer } from './setCityData';\nimport { reducer as setCityDataLoadingReducer } from './setCityDataLoading';\nimport { reducer as setCitySelectorVisibleReducer } from './setCitySelectorVisible';\nimport { reducer as setDateSelectorVisibleReducer } from './setDateSelectorVisible';\nimport { reducer as setSelectedCityReducer } from './setSelectedCity';\nimport { reducer as toggleHighSpeedReducer } from './toggleHighSpeed';\nimport { reducer as setDateReducer } from \"./setDate\";\n\nconst reducers = [\n  setCityDataReducer,\n  setCityDataLoadingReducer,\n  setCitySelectorVisibleReducer,\n  setDateSelectorVisibleReducer,\n  setDateReducer,\n  setSelectedCityReducer,\n  toggleHighSpeedReducer\n];\n\nexport default function reducer(state = initState, action) {\n  return reducers.reduce((s, r) => r(s, action), state);\n}","import { createStore, applyMiddleware, compose } from \"redux\";\n\nimport reducer from './reducers';\nimport thunk from 'redux-thunk';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport default createStore(\n  reducer,\n  composeEnhancers(applyMiddleware(thunk))\n)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport switchImg from './imgs/switch.svg'\nimport './Journey.css';\n\nfunction Journey(props) {\n  const { \n    from,\n    to,\n    exchangeFromTo,\n    showCitySelector\n   } = props;\n  return (\n    <div className=\"journey\">\n      <div\n        className=\"journey-station\"\n        onClick={() => showCitySelector(true)}\n      >\n        <input\n          type=\"text\"\n          readOnly\n          name=\"from\"\n          className=\"journey-input journey-from\"\n          value={from}\n        />\n      </div>\n      <div className=\"journey-switch\" onClick={exchangeFromTo}>\n        <img src={switchImg} width=\"70\" height=\"40\" alt=\"switch\"/>\n      </div>\n      <div\n        className=\"journey-station\"\n        onClick={() => showCitySelector(false)}\n      >\n        <input\n          type=\"text\"\n          readOnly\n          name=\"to\"\n          className=\"journey-input journey-to\"\n          value={to}\n        />\n      </div>\n    </div>\n  )\n}\n\nJourney.propTypes = {\n  from: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n  exchangeFromTo: PropTypes.func.isRequired,\n  showCitySelector: PropTypes.func.isRequired\n}\n\nexport default Journey;","import React, {useMemo} from 'react';\nimport PropTypes from \"prop-types\";\nimport dayjs from 'dayjs';\n\nimport { h0 } from '../../common/fp';\nimport './DepartDate.css';\n\nfunction DepartDate(props) {\n  const { time, handleClick } = props;\n\n  const newTime = h0(time);\n  const departDate = useMemo(() => new Date(newTime), [newTime]);\n\n  const isToday = useMemo(() => newTime === h0(), [newTime]);\n\n  const departDateString = useMemo(() => {\n    return dayjs(newTime).format('YYYY-MM-DD');\n  }, [newTime]);\n\n  const weekString = useMemo(() => '星期' + ['日', '一', '二', '三', '四', '五', '六'][departDate.getDay()] + (isToday ? ' (今天)' : ''), [departDate, isToday]);\n\n  return (\n    <div className=\"depart-date\" onClick={handleClick}>\n      <input type=\"hidden\" name=\"date\" value={departDateString} />\n      <span>{departDateString}</span>\n      <span className=\"depart-week\">{weekString}</span>\n    </div>\n  )\n}\nDepartDate.propTypes = {\n  time: PropTypes.number.isRequired,\n  handleClick: PropTypes.func.isRequired,\n}\n\nexport default DepartDate;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './HighSpeed.css'\n\nfunction HighSpeed(props) {\n  const {\n    isHighSpeed, toggle\n  } = props;\n  return (\n    <div className=\"high-speed\">\n      <div className=\"high-speed-label\">只看高铁/动车</div>\n      <div className=\"high-speed-switch\" onClick={() => toggle()}>\n        <input type=\"hidden\" name=\"highSpeed\" value={isHighSpeed} />\n        <div className={['high-speed-track', isHighSpeed ? 'checked' : ''].filter(Boolean).join(' ')}>\n          <span className={['high-speed-handle', isHighSpeed ? 'checked' : ''].filter(Boolean).join(' ')}></span>\n        </div>\n      </div>\n    </div>\n  )\n}\nHighSpeed.propTypes = {\n  isHighSpeed: PropTypes.bool.isRequired,\n  toggle: PropTypes.func.isRequired,\n}\n\nexport default HighSpeed;","import React, {memo} from 'react';\n\nimport './Submit.css'\n\nconst Submit = memo(function Submit() {\n  return (\n    <div className=\"submit\">\n      <button type=\"submit\" className=\"submit-button\">搜索</button>\n    </div>\n  )\n});\n\nexport default Submit;","import React, {useState, useEffect, useMemo, memo} from 'react';\nimport PropTypes from 'prop-types';\n\nimport './CitySelector.css';\nimport { useCallback } from 'react';\n\n// 每个城市\nconst CityItem = memo(function CityItem(props) {\n  const {\n    name, handleSelect\n  } = props;\n\n  return (\n    <li className=\"city-li\" onClick={() => handleSelect(name)}>\n      {name}\n    </li>\n  )\n})\nCityItem.propTypes = {\n  name: PropTypes.string.isRequired,\n  handleSelect: PropTypes.func.isRequired\n}\n\n// 每个城市拼音分组\nconst CitySection = memo(function CitySection(props) {\n  const { title, cities=[], handleSelect } = props;\n  return (\n    <ul className=\"city-ul\">\n      <li className=\"city-li\" key={title} data-cate={title}>{title}</li>\n      {\n        cities.map(city => {\n          return <CityItem key={city.name} name={city.name} handleSelect={handleSelect} />\n        })\n      }\n    </ul>\n  )\n})\nCitySection.propTypes = {\n  title: PropTypes.string.isRequired,\n  cities: PropTypes.array,\n  handleSelect: PropTypes.func.isRequired\n}\n\n// 右侧定位字母\nconst AlphaIndex = memo(function AlphaIndex(props) {\n  const {\n    alpha,\n    handleClick\n  } = props;\n  return (\n    <i className=\"city-index-item\" onClick={() => handleClick(alpha)}>\n      {alpha}\n    </i>\n  )\n})\nAlphaIndex.propTypes = {\n  alpha: PropTypes.string.isRequired,\n  handleClick: PropTypes.func.isRequired\n}\n\n// 城市列表\nconst CityList = memo(function CityList(props) {\n  const { sections, handleSelect, toAlpha } = props;\n\n  const alphabet = useMemo(() => {\n    return Array.from(new Array(26), (ele, index) => {\n      return String.fromCharCode(65 + index);\n    })\n  }, []);\n\n  return (\n    <div className=\"city-list\">\n      <div className=\"city-cate\">\n        {\n          sections.map(section => {\n            return (\n              <CitySection\n                key={section.title}\n                title={section.title}\n                cities={section.citys}\n                handleSelect={handleSelect}\n              />\n            )\n          })\n        }\n      </div>\n      <div className=\"city-index\">\n        {alphabet.map(alpha => {\n            return <AlphaIndex key={alpha} alpha={alpha} handleClick={toAlpha} />\n        }\n        )}\n      </div>\n    </div>\n  )\n})\nCityList.propTypes = {\n  sections: PropTypes.array.isRequired,\n  handleSelect: PropTypes.func.isRequired,\n  toAlpha: PropTypes.func.isRequired\n}\n\nconst SuggestItem = memo(function SuggestItem(props) {\n  const { name, handleClick } = props;\n\n  return (\n    <li className=\"city-suggest-li\" onClick={() => handleClick}>\n      {name}\n    </li>\n  )\n})\nSuggestItem.propTypes = {\n  name: PropTypes.string.isRequired,\n  handleClick: PropTypes.func.isRequired,\n}\n\nconst Suggest = memo(function Suggest(props) {\n  const { searchKey, handleSelect } = props;\n\n  const [result, setResult] = useState([]);\n\n  useEffect(() => {\n    fetch('/rest/search?key=' + encodeURIComponent(searchKey))\n      .then(res => res.json())\n      .then(data => {\n        const { result, searchKey: sKey } = data;\n        if (sKey === searchKey) {\n          setResult(result)\n        }\n      })\n  }, [searchKey]);\n\n  const fallBackResult = useMemo(() => {\n    return result.length ? result : [{ display: searchKey }]\n  }, [result, searchKey]);\n\n  return (\n    <div className=\"city-suggest\">\n      <ul className=\"city-suggest-ul\">\n        {\n          fallBackResult.map(item => {\n            return <SuggestItem key={item.display} name={item.display} handleClick={handleSelect}/>\n          })\n        }\n      </ul>\n    </div>\n  )\n})\nSuggest.propTypes = {\n  searchKey: PropTypes.string.isRequired,\n  handleSelect: PropTypes.func.isRequired,\n}\n\nconst CitySelector = memo(function CitySelector(props) {\n  const { show, cityData, isLoading, handleBack, fetchCityData,handleSelect } = props;\n\n  const [searchKey, setSearchKey] = useState('');\n\n  const key = useMemo(() => {\n    return searchKey.trim();\n  }, [searchKey]);\n\n  useEffect(() => {\n    if (!show || cityData) return;\n    fetchCityData();\n  }, [show, cityData, fetchCityData]);\n\n  const toAlpha = useCallback(alpha => {\n    document.querySelector(`[data-cate='${alpha}']`)\n      .scrollIntoView();\n  }, []);\n\n  const outputCitySections = useCallback(() => {\n    if (isLoading) {\n      return <div>loading</div>\n    }\n    if (cityData) {\n      return <CityList sections={cityData.cityList} handleSelect={handleSelect} toAlpha={toAlpha}/>\n    }\n    return <div>error</div>\n  }, [isLoading, cityData, handleSelect, toAlpha])\n\n  return (\n    <div className={['city-selector', (!show) && 'hidden'].filter(Boolean).join(' ')}>\n      <div className=\"city-search\">\n        <div className=\"search-back\" onClick={()=> handleBack()}>\n          <svg width=\"42\" height=\"42\">\n            <polyline\n              points=\"25,13 16,21 25,29\"\n              stroke=\"#fff\"\n              strokeWidth=\"2\"\n              fill=\"none\"\n            />\n          </svg>\n        </div>\n        <div className=\"search-input-wrapper\">\n          <input\n            type=\"text\"\n            value={searchKey}\n            className=\"search-input\"\n            placeholder=\"城市/车站的中文或拼音\"\n            onChange={(e) => setSearchKey(e.target.value)}\n          />\n        </div>\n        <i\n          className={['search-clean', key.length === 0 && 'hidden'].filter(Boolean).join(' ')}\n          onClick={() => setSearchKey('')}\n        >&#xf063;</i>\n      </div>\n      {\n        Boolean(key) && <Suggest searchKey={key} handleSelect=\n          {handleSelect}/>\n      }\n      {outputCitySections()}\n    </div>\n  )\n})\nCitySelector.propTypes = {\n  show: PropTypes.bool.isRequired,\n  cityData: PropTypes.any,\n  isLoading: PropTypes.bool.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  fetchCityData: PropTypes.func.isRequired,\n  handleSelect: PropTypes.func.isRequired\n}\nexport default CitySelector;","import React, {useMemo} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { h0 } from './fp';\nimport Header from './Header';\nimport './DateSelector.css';\n\nfunction Day(props) {\n  const { day, handleSelect } = props;\n\n  const dayStr = useMemo(() => {\n    const now = h0();\n\n    return now === day ? '今天' : new Date(day).getDate();\n  }, [day]);\n\n  if (!day) {\n    return <td className=\"null\"></td>\n  }\n\n  const now = h0();\n  let isWeekend = [6, 0].includes(new Date(day).getDay());\n\n  if (day < now) {\n    return <td className={['disabled', isWeekend ? 'weekend': ''].filter(Boolean).join(' ')}>{dayStr}</td>\n  }\n\n  return (\n    <td onClick={() => handleSelect(day)} className={isWeekend ? 'weekend': ''}>{dayStr}</td>\n  )\n}\nDay.propTypes = {\n  day: PropTypes.number,\n  handleSelect: PropTypes.func.isRequired,\n}\n\nfunction Week(props) {\n  const {\n    days, handleSelect\n  } = props;\n\n  return (\n    <tr className=\"date-table-days\">\n      {\n        days.map((day, index) => <Day key={index} day={day} handleSelect={handleSelect}/>)\n      }\n    </tr>\n  )\n}\nWeek.propTypes = {\n  days: PropTypes.array.isRequired,\n  handleSelect: PropTypes.func.isRequired,\n}\n\nfunction Month(props) {\n  const { startingTimeInMonth, handleSelect } = props;\n\n  const startDay = new Date(startingTimeInMonth);\n  \n  const weeks = useMemo(() => {\n    const startDay = new Date(startingTimeInMonth);\n    const currentDay = new Date(startingTimeInMonth);\n    \n    // 获取当月所有日期\n    let days = [];\n    while (currentDay.getMonth() === startDay.getMonth()) {\n      days.push(currentDay.getTime());\n      currentDay.setDate(currentDay.getDate() + 1);\n    }\n\n    // 补齐前后空缺\n    days = new Array(startDay.getDay())\n      .fill(null).concat(days);\n    const lastDay = new Date(days[days.length - 1]);\n    days = days.concat(new Array(6 - lastDay.getDay()).fill(null));\n\n    // 所有日期按周分组\n    let weeks = [];\n    for (let row = 0; row < days.length / 7; row++) {\n      const week = days.slice(row * 7, (row + 1) * 7);\n      weeks.push(week);\n    }\n\n    return weeks;\n  }, [startingTimeInMonth]);\n  \n\n  return (\n    <table className=\"date-table\">\n      <thead>\n        <tr><td colSpan=\"7\">\n          <h5>{`${startDay.getFullYear()}年${startDay.getMonth() + 1}月`}</h5>\n        </td></tr>\n      </thead>\n      <tbody>\n        <tr className=\"date-table-weeks\">\n          <th className=\"weekend\">周日</th>\n          <th>周一</th>\n          <th>周二</th>\n          <th>周三</th>\n          <th>周四</th>\n          <th>周五</th>\n          <th className=\"weekend\">周六</th>\n        </tr>\n        {\n          weeks.map((week, index) => <Week key={index} days={week} handleSelect={handleSelect} />\n          )\n        }\n      </tbody>\n    </table>\n  )\n}\nMonth.propTypes = {\n  startingTimeInMonth: PropTypes.number.isRequired,\n  handleSelect: PropTypes.func.isRequired,\n}\n\nfunction DateSelector(props) {\n  const {\n    show, handleSelect, handleBack\n  } = props;\n\n  // 获取最近三个月的开始事件戳\n  const monthSequence = useMemo(() => {\n    let now = new Date();\n    now.setHours(0);\n    now.setMinutes(0);\n    now.setSeconds(0);\n    now.setMilliseconds(0);\n    now.setDate(1);\n\n    let monthSequence = [];\n    \n    monthSequence.push(now.getTime());\n    now.setMonth(now.getMonth() + 1);\n    monthSequence.push(now.getTime());\n    now.setMonth(now.getMonth() + 1);\n    monthSequence.push(now.getTime());\n\n    return monthSequence;\n  }, []);\n\n  return (\n    <div className={['date-selector', !show ? 'hidden' : ''].filter(Boolean).join(' ')}>\n      <Header title=\"日期选择\" handleBack={handleBack} isBackVisible={true} />\n      <div className=\"date-selector-tables\">\n        {\n          monthSequence.map(month => {\n            return <Month key={month} startingTimeInMonth={month} handleSelect={handleSelect}/>\n          })\n        }\n      </div>\n    </div>\n  )\n}\nDateSelector.propTypes = {\n  show: PropTypes.bool.isRequired,\n  handleSelect: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n}\n\nexport default DateSelector;","import React, {useCallback, useMemo} from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from \"redux\";\nimport * as actions from './store/actions';\nimport './App.css';\n\nimport Header from '../common/Header';\nimport Journey from './components/Journey';\nimport DepartDate from './components/DepartDate';\nimport HighSpeed from './components/HighSpeed';\nimport Submit from './components/Submit';\nimport CitySelector from '../common/CitySelector';\nimport DateSelector from '../common/DateSelector';\n\nfunction App(props) {\n  const { \n    from,\n    to,\n    isCitySelectorVisible,\n    isDateSelectorVisible,\n    cityData,\n    isCityDataLoading,\n    date,\n    isHighSpeed,\n    dispatch\n  } = props;\n\n  const cbs = useMemo(() => {\n    // 将 bindActionCreators 放到这里, 防止每次组件重新渲染都重新执行, 生成新的函数导致子组件重新渲染\n    return bindActionCreators(actions, dispatch);\n  }, [dispatch]); // dispatch 不会改变, 这里使用空数组也可以\n  \n  const handleBack = useCallback(() => {\n    window.history.back();\n  }, [])\n  \n  const handleSelectDate = useCallback((date) => {\n    cbs.setDate(date);\n    cbs.hideDateSelector();\n  }, [cbs]);\n\n  return (\n    <div>\n      <div className=\"header-wrapper\">\n        <Header\n          title=\"火车票\"\n          isBackVisible={false}\n          handleBack={handleBack}\n        />\n      </div>\n      <form action=\"./query.html\" className=\"form\">\n        <Journey\n          from={from}\n          to={to}\n          exchangeFromTo={cbs.exchangeFromTo}\n          showCitySelector={cbs.showCitySelector}\n        />\n        <DepartDate time={date} handleClick={cbs.showDateSelector}/>\n        <HighSpeed isHighSpeed={isHighSpeed} toggle={cbs.toggleHighSpeed}/>\n        <Submit />\n      </form>\n      <CitySelector\n        show={isCitySelectorVisible}\n        cityData={cityData}\n        isLoading={isCityDataLoading}\n        handleBack={cbs.hideCitySelector}\n        fetchCityData={cbs.fetchCityData}\n        handleSelect={cbs.setSelectedCity}\n      />\n      <DateSelector\n        show={isDateSelectorVisible}\n        handleBack={cbs.hideDateSelector}\n        handleSelect={handleSelectDate}\n      />\n    </div>\n  )\n}\n\nexport default connect(\n  state => { return {...state} },\n  dispatch => {return {dispatch}}\n)(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport 'normalize.css/normalize.css';\nimport * as serviceWorker from '../serviceWorker';\n\n// 引入样式文件/store/根组件, 完成 index 的初始化\nimport store from './store';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nif (process.env.NODE_ENV === 'production') {\n  serviceWorker.register();\n} else {\n  serviceWorker.unregister();\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}